global
    log stdout format raw local0
    stats socket /var/run/haproxy.sock mode 600 level admin

peers mycluster
    peer node1 10.0.1.1:1024
    peer node2 10.0.1.2:1024
    peer node3 10.0.1.3:1024

defaults
    log     global
    mode    http
    option  httplog
    timeout connect 5000ms
    timeout client  50000ms
    timeout server  50000ms

backend web
    stick-table type ip size 100k expire 30m peers mycluster
    server srv1 10.0.0.1:8080
